<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Guess - Ghana Lingo</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/audio.js"></script>
    <script src="js/auth.js"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="logo">
                <h1><span style="color: #CE1126;">Ghana</span><span style="color: #006B3F;">Lingo</span></h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="languages.html">Languages</a></li>
                    <li><a href="culture.html">Culture & History</a></li>
                    <li><a href="translation.html">Translation</a></li>
                    <li><a href="services.html">Services</a></li>
                    <li><a href="teachers.html">Online Teachers</a></li>
                    <li><a href="games.html">Games</a></li>
                    <li><a href="login.html" class="btn-login">Login</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <section class="container">
        <h1>Audio Guess Game</h1>
        <p>Listen to pronunciations and guess the correct word from multiple choices.</p>
        
        <div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin: 2rem 0; text-align: center;">
            <h2 style="color: #CE1126;">Twi Pronunciation Challenge</h2>
            
            <div style="margin: 2rem 0;">
                <h3>Listen to the pronunciation:</h3>
                <div style="margin: 1rem 0;">
                    <button id="play-button" class="btn-primary" style="padding: 1rem 2rem; font-size: 1.2rem;" onclick="playAudio()">
                        ðŸ”Š Play Audio
                    </button>
                </div>
            </div>
            
            <div style="margin: 2rem 0;">
                <h3>Choose the correct word:</h3>
                <div id="options-container" style="margin: 1rem 0;">
                    <!-- Options will be generated by JavaScript -->
                </div>
            </div>
            
            <div id="feedback" style="margin: 2rem 0; min-height: 2rem;"></div>
            
            <div style="margin: 2rem 0;">
                <p>Words Correct: <span id="correct-count">0</span>/<span id="total-words">10</span></p>
                <p>Score: <span id="score">0</span></p>
            </div>
        </div>
        
        <div style="text-align: center;">
            <a href="games.html" class="btn-secondary">Back to Games</a>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 Ghana Lingo. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Sample words with audio (using text-to-speech simulation)
        const words = [
            { word: "Mambo", meaning: "Hello" },
            { word: "Medaase", meaning: "Thank you" },
            { word: "NsÉ”", meaning: "Water" },
            { word: "Fie", meaning: "House" },
            { word: "ObÉ”foÉ”", meaning: "Friend" },
            { word: "Aane", meaning: "Yes" },
            { word: "Daabi", meaning: "No" },
            { word: "Adabo", meaning: "Food" },
            { word: "YÉ›srÉ›", meaning: "Please" },
            { word: "Baie", meaning: "Goodbye" }
        ];
        
        let currentIndex = 0;
        let correctCount = 0;
        let score = 0;
        let currentWord = null;
        
        // Initialize the game
        document.addEventListener('DOMContentLoaded', function() {
            loadNextQuestion();
            updateNavigation();
        });
        
        // Load the next question
        function loadNextQuestion() {
            if (currentIndex >= words.length) {
                // Game completed
                document.getElementById('play-button').disabled = true;
                document.getElementById('options-container').innerHTML = '';
                document.getElementById('feedback').innerHTML = `<div style="color: #006B3F; font-weight: bold;">Game Completed! Final Score: ${score} points</div>`;
                return;
            }
            
            currentWord = words[currentIndex];
            document.getElementById('feedback').innerHTML = '';
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('total-words').textContent = words.length;
            document.getElementById('score').textContent = score;
            
            // Generate options (1 correct + 3 random incorrect)
            const options = generateOptions(currentWord.word);
            displayOptions(options);
        }
        
        // Generate options for the current word
        function generateOptions(correctWord) {
            const options = [correctWord];
            
            // Add 3 random incorrect options
            while (options.length < 4) {
                const randomWord = words[Math.floor(Math.random() * words.length)].word;
                if (!options.includes(randomWord)) {
                    options.push(randomWord);
                }
            }
            
            // Shuffle options
            return shuffleArray(options);
        }
        
        // Display options as buttons
        function displayOptions(options) {
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'btn-secondary';
                button.style.cssText = 'margin: 0.5rem; padding: 1rem 2rem; font-size: 1.1rem; min-width: 150px;';
                button.textContent = option;
                button.onclick = () => checkAnswer(option);
                container.appendChild(button);
            });
        }
        
        // Play audio (simulated with text-to-speech)
        function playAudio() {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(currentWord.word);
                utterance.lang = 'en-US'; // This would be Twi in a real implementation
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            } else {
                // Fallback for browsers that don't support speech synthesis
                alert(`Pronunciation: "${currentWord.word}" (This would be audio in a real implementation)`);
            }
        }
        
        // Check the user's answer
        function checkAnswer(selectedOption) {
            // Disable buttons temporarily
            const buttons = document.querySelectorAll('#options-container button');
            buttons.forEach(btn => btn.disabled = true);
            
            if (selectedOption === currentWord.word) {
                // Correct answer
                correctCount++;
                score += 10;
                document.getElementById('feedback').innerHTML = `<div style="color: #006B3F; font-weight: bold;">Correct! "${currentWord.word}" means "${currentWord.meaning}".</div>`;
            } else {
                // Incorrect answer
                document.getElementById('feedback').innerHTML = `<div style="color: #CE1126; font-weight: bold;">Incorrect. "${currentWord.word}" means "${currentWord.meaning}".</div>`;
            }
            
            // Move to next question after delay
            setTimeout(() => {
                currentIndex++;
                loadNextQuestion();
            }, 2000);
        }
        
        // Utility function to shuffle array
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
    </script>
</body>
</html>